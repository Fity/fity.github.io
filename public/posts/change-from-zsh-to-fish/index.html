<!DOCTYPE html>
<html lang="en-us">
<head>
  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge,chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  
  
  <meta name="generator" content="Hugo 0.59.1" />

  <title>从zsh迁移到fish了 &middot; Fity&#39;s Blog</title>

  <link rel="shortcut icon" href="http://fity.me/images/favicon.ico">
  <link rel="stylesheet" href="http://fity.me/css/spectre.min.css">
  <link rel="stylesheet" href="http://fity.me/css/style.css">
  <link rel="stylesheet" href="http://fity.me/css/highlight.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.9.0/css/all.min.css">
  

  

  
  <meta property="og:title" content="从zsh迁移到fish了" />
<meta property="og:description" content="自从知道 fish 之后，就一直很眼红 fish 的补全和高亮功能。 之前也有过一次短暂迁移的经历，配置好了基本的 fish 和 oh-my-fish 环境，然后就放弃了。。。 理由是，fish 不兼容 bash，现有的一些脚本没法用。而且用的 VIM 插件中有依赖 posix shell 的， 换了 fish 导致插件不可用（虽然当晚就找到解决方案并解决了。。。解决方案见文末。。。
记录一下这次迁移中遇到的一些状况好了。
首先，fish 要装 2.x 版（之前装的，怎么装忘了，大概就是 brew install 一下），oh-my-fish 直接上github 仓库复制、粘贴一下就好。 我用的主题是zish，挺好的！
然后就是插件的配置了。 我用到的插件有
brew git balias theme percol python autojump  说明
balias是 alias 的增强版，实现了 alias 命令的自动补全。
theme是浏览和变更主题 用的，方便随时看厌主题了换一个。
percol是查询命令行历史用的（就是其他 shell 都有的ctrl&#43;r功能，原生是不带的。。。然后还要在命令行把percol装上）。
python提供了一些常用的 Python 快捷键（开一个临时 HTTP 服务什么的，暂时还没用上）。
autojump就是在 bash 版的 autojump 上包了一层。
为什么要用 autojump 而不是看起来更加厉害的z，是因为 z 在下列目录结构下的操作方式超出了我智商的上限，无能为力了。
path/hello path/hello/llo  因为两个目录拥有一样的前缀，所以前者权重始终大于后者，这个没有问题。 但是。。。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://fity.me/posts/change-from-zsh-to-fish/" />
<meta property="article:published_time" content="2015-03-20T23:59:04+08:00" />
<meta property="article:modified_time" content="2015-03-20T23:59:04+08:00" />

  
  <meta itemprop="name" content="从zsh迁移到fish了">
<meta itemprop="description" content="自从知道 fish 之后，就一直很眼红 fish 的补全和高亮功能。 之前也有过一次短暂迁移的经历，配置好了基本的 fish 和 oh-my-fish 环境，然后就放弃了。。。 理由是，fish 不兼容 bash，现有的一些脚本没法用。而且用的 VIM 插件中有依赖 posix shell 的， 换了 fish 导致插件不可用（虽然当晚就找到解决方案并解决了。。。解决方案见文末。。。
记录一下这次迁移中遇到的一些状况好了。
首先，fish 要装 2.x 版（之前装的，怎么装忘了，大概就是 brew install 一下），oh-my-fish 直接上github 仓库复制、粘贴一下就好。 我用的主题是zish，挺好的！
然后就是插件的配置了。 我用到的插件有
brew git balias theme percol python autojump  说明
balias是 alias 的增强版，实现了 alias 命令的自动补全。
theme是浏览和变更主题 用的，方便随时看厌主题了换一个。
percol是查询命令行历史用的（就是其他 shell 都有的ctrl&#43;r功能，原生是不带的。。。然后还要在命令行把percol装上）。
python提供了一些常用的 Python 快捷键（开一个临时 HTTP 服务什么的，暂时还没用上）。
autojump就是在 bash 版的 autojump 上包了一层。
为什么要用 autojump 而不是看起来更加厉害的z，是因为 z 在下列目录结构下的操作方式超出了我智商的上限，无能为力了。
path/hello path/hello/llo  因为两个目录拥有一样的前缀，所以前者权重始终大于后者，这个没有问题。 但是。。。">


<meta itemprop="datePublished" content="2015-03-20T23:59:04&#43;08:00" />
<meta itemprop="dateModified" content="2015-03-20T23:59:04&#43;08:00" />
<meta itemprop="wordCount" content="137">



<meta itemprop="keywords" content="" />

  <meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="从zsh迁移到fish了"/>
<meta name="twitter:description" content="自从知道 fish 之后，就一直很眼红 fish 的补全和高亮功能。 之前也有过一次短暂迁移的经历，配置好了基本的 fish 和 oh-my-fish 环境，然后就放弃了。。。 理由是，fish 不兼容 bash，现有的一些脚本没法用。而且用的 VIM 插件中有依赖 posix shell 的， 换了 fish 导致插件不可用（虽然当晚就找到解决方案并解决了。。。解决方案见文末。。。
记录一下这次迁移中遇到的一些状况好了。
首先，fish 要装 2.x 版（之前装的，怎么装忘了，大概就是 brew install 一下），oh-my-fish 直接上github 仓库复制、粘贴一下就好。 我用的主题是zish，挺好的！
然后就是插件的配置了。 我用到的插件有
brew git balias theme percol python autojump  说明
balias是 alias 的增强版，实现了 alias 命令的自动补全。
theme是浏览和变更主题 用的，方便随时看厌主题了换一个。
percol是查询命令行历史用的（就是其他 shell 都有的ctrl&#43;r功能，原生是不带的。。。然后还要在命令行把percol装上）。
python提供了一些常用的 Python 快捷键（开一个临时 HTTP 服务什么的，暂时还没用上）。
autojump就是在 bash 版的 autojump 上包了一层。
为什么要用 autojump 而不是看起来更加厉害的z，是因为 z 在下列目录结构下的操作方式超出了我智商的上限，无能为力了。
path/hello path/hello/llo  因为两个目录拥有一样的前缀，所以前者权重始终大于后者，这个没有问题。 但是。。。"/>

</head>

<body onload="setPixelFont()">
  <div class="container p-fixed" style="z-index:3">
  <nav class="navbar m-2 p-2 s-rounded shadow bg-primary">
    <section class="navbar-section">
      <button class="btn btn-action btn-primary s-circle text-gray" id="pixelfont-toggle"><i class="fas fa-robot fa-lg"></i></button>
    </section>
    <section class="navbar-section">
      
        <a class="btn btn-primary" href='http://fity.me'>Home</a>
      

      

      
    </section>
  </nav>
</div>

  <section class="container grid-md">
  <div class="columns">
    
    
<article class="container p-centered mt-space">
  <header>
    <h2 class="text-center">从zsh迁移到fish了</h2>
    <h6 class="text-gray text-italic"></h6>
  </header>
  <section class="my-gap">
    <p>自从知道 fish 之后，就一直很眼红 fish 的补全和高亮功能。
之前也有过一次短暂迁移的经历，配置好了基本的 fish 和 oh-my-fish 环境，然后就放弃了。。。
理由是，fish 不兼容 bash，现有的一些脚本没法用。而且用的 VIM 插件中有依赖 posix shell 的，
换了 fish 导致插件不可用（虽然当晚就找到解决方案并解决了。。。解决方案见文末。。。</p>

<p>记录一下这次迁移中遇到的一些状况好了。</p>

<p>首先，fish 要装 2.x 版（之前装的，怎么装忘了，大概就是 brew install 一下），oh-my-fish
直接上<a href="https://github.com/bpinto/oh-my-fish">github 仓库</a>复制、粘贴一下就好。
我用的主题是<code>zish</code>，挺好的！</p>

<p>然后就是插件的配置了。
我用到的插件有</p>

<pre><code class="language-bash">brew git balias theme percol python autojump
</code></pre>

<p>说明<br />
<code>balias</code>是 alias 的增强版，实现了 alias 命令的自动补全。<br />
<code>theme</code>是浏览和变更主题
用的，方便随时看厌主题了换一个。<br />
<code>percol</code>是查询命令行历史用的（就是其他 shell 都有的<code>ctrl+r</code>功能，原生是不带的。。。然后还要在命令行把<a href="https://github.com/mooz/percol">percol</a>装上）。<br />
<code>python</code>提供了一些常用的 Python 快捷键（开一个临时 HTTP 服务什么的，暂时还没用上）。<br />
<code>autojump</code>就是在 bash 版的 autojump 上包了一层。</p>

<p>为什么要用 autojump 而不是看起来更加厉害的<a href="https://github.com/rupa/z">z</a>，是因为 z 在下列目录结构下的操作方式超出了我智商的上限，无能为力了。</p>

<pre><code class="language-bash">path/hello
path/hello/llo
</code></pre>

<p>因为两个目录拥有一样的前缀，所以前者权重始终大于后者，这个没有问题。
但是。。。</p>

<p>说好的<code>z llo llo</code>不好使，在<code>path/hello</code>下用<code>z llo</code>始终停留在同一目录下。。。
更不用说实际的目录结构是<code>path/hello/hello/llo</code>了。。。
而 autojump 就做的好多了。在<code>path/hello</code>下敲<code>j llo</code>就会跳转到下一级<code>hello</code>去。</p>

<p>fish 环境下 python 的 virtualenvwrapper 不可用，替代品是<a href="https://github.com/adambrenecki/virtualfish/">virtualfish</a>，clone 下来把配置贴到<code>config.fish</code>里就好了。<br />
要说坑的话，就是在把当前 env 状态加到 prompt 中的时候，修改并保存了<code>fish_prompt</code>函数，但其实 zish 主题的这个函数还有一个 helper 函数用来判断当前目录的 git 状态，
用自带提供的 funcsave 就会漏掉这个函数，导致每加载一次配置就报一次错。。。</p>

<p>oh-my-fish 没有 git 相关的别名设置，我从 oh-my-zsh 的设置中抄了几个简单常用的，带变量名展开啊命令行展开啊之类的“高级”别名因为语法不兼容，暂时没时间去修。
因此，bash 版自动给 iterm2 的 tab 设置颜色的脚本也没有迁移过来，惨惨惨。</p>

<p>结尾：<br />
上文中提到的 VIM 插件的问题，其实只要在<code>.vimrc</code>中添加一行<code>set shell=/bin/bash</code>之类的语句指定 VIM 环境中的 shell 就好了。</p>

<p>最后，这次短暂折腾中遇到、想到但还没解决的问题有：</p>

<ol>
<li>TODO git 相关别名设置还不完整，有些怨念</li>
<li>TODO vim 的 StripWhitespace 设置有问题，写函数处理失败，对 vimscript 理解不能</li>
<li>DONE 给 jekyll 换了一个解析器，感觉好多了</li>
</ol>


    
  </section>
  <div class="divider my-gap"></div>
  <footer class="col-12 d-inline-block">
    <span class="float-left">
      <button class="btn btn-action btn-accent shadow s-circle" onclick="window.history.back();"><i class="fas fa-arrow-left"></i></button>
    </span>
    <span class="float-right">
      <div class="text-right float-left mx-2">
        <span class="text-dark"></span><br>
        <span class="text-gray"></span>
      </div>
      <figure class="avatar avatar-lg">
        <img id="profile">
      </figure>
    </span>
  </footer>
</article>

    <footer class="container p-centered text-center my-gap">
  

  <small class="text-gray">
  
    © Copyright 2019 
  
  </small>
</footer>

  </div>
  </section>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
<script src="http://fity.me/js/main.js"></script>
<script src="http://fity.me/js/highlight.js"></script>
<script>hljs.initHighlightingOnLoad();</script>





</body>
</html>
